<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timetable Optimization System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            margin-bottom: 25px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }

        .card-title {
            font-size: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        input,
        select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border 0.3s;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            padding: 12px 25px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: var(--secondary);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #38b2d6;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th,
        td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--light-gray);
        }

        th {
            background-color: var(--light);
            font-weight: 600;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        .action-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .timetable-container {
            overflow-x: auto;
        }

        .timetable {
            min-width: 800px;
        }

        .timetable th,
        .timetable td {
            text-align: center;
            padding: 15px;
        }

        .timetable th {
            background-color: var(--primary);
            color: white;
        }

        .timetable td {
            background-color: white;
            border: 1px solid var(--light-gray);
        }

        .subject-cell {
            padding: 8px;
            border-radius: 4px;
            font-weight: 500;
            color: white;
        }

        .hidden {
            display: none;
        }

        .alert {
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 500;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .faculty-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .faculty-name {
            flex: 1;
        }

        .faculty-subjects {
            flex: 2;
        }

        .faculty-leaves {
            flex: 1;
        }

        .special-class {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background-color: var(--light);
            border-radius: var(--border-radius);
        }

        .special-class select,
        .special-class input {
            flex: 1;
        }

        .remove-btn {
            background: #e63946;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 2rem;
            }

            .card {
                padding: 15px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-calendar-alt"></i> Timetable Optimization System</h1>
            <p class="subtitle">Generate optimized timetables based on your institutional parameters</p>
        </header>

        <div class="tabs">
            <div class="tab active" data-tab="basic">Basic Parameters</div>
            <div class="tab" data-tab="subjects">Subjects & Faculty</div>
            <div class="tab" data-tab="special">Special Classes</div>
            <div class="tab" data-tab="timetable">Generated Timetable</div>
        </div>

        <div id="basic-tab" class="tab-content active">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-cog"></i> Basic Parameters</h2>
                </div>

                <div class="form-group">
                    <label for="classrooms">Number of Classrooms Available</label>
                    <input type="number" id="classrooms" min="1" value="5">
                </div>

                <div class="form-group">
                    <label for="batches">Number of Batches of Students</label>
                    <input type="number" id="batches" min="1" value="3">
                </div>

                <div class="form-group">
                    <label for="max-classes">Maximum Number of Classes per Day</label>
                    <input type="number" id="max-classes" min="1" value="6">
                </div>

                <div class="action-buttons">
                    <button class="btn" id="next-to-subjects">
                        Next: Subjects & Faculty <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="subjects-tab" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-book"></i> Subjects & Faculty Information</h2>
                </div>

                <div class="form-group">
                    <label for="subjects-count">Number of Subjects to be Taught</label>
                    <input type="number" id="subjects-count" min="1" value="5">
                </div>

                <div id="subjects-container">
                    <h3>Subject Details</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Subject Name</th>
                                <th>Classes per Week</th>
                                <th>Faculty Count</th>
                            </tr>
                        </thead>
                        <tbody id="subjects-table">
                            <!-- Subjects will be added here dynamically -->
                        </tbody>
                    </table>
                </div>

                <div id="faculty-container" class="hidden">
                    <h3>Faculty Details</h3>
                    <div id="faculty-list">
                        <!-- Faculty will be added here dynamically -->
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn" id="back-to-basic">
                        <i class="fas fa-arrow-left"></i> Back to Basic Parameters
                    </button>
                    <button class="btn" id="next-to-special">
                        Next: Special Classes <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="special-tab" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-star"></i> Special Classes with Fixed Slots</h2>
                </div>

                <div class="form-group">
                    <p>Add special classes that need to be scheduled at specific times:</p>
                    <div id="special-classes-container">
                        <!-- Special classes will be added here -->
                    </div>
                    <button class="btn" id="add-special-class">
                        <i class="fas fa-plus"></i> Add Special Class
                    </button>
                </div>

                <div class="action-buttons">
                    <button class="btn" id="back-to-subjects">
                        <i class="fas fa-arrow-left"></i> Back to Subjects & Faculty
                    </button>
                    <button class="btn btn-success" id="generate-timetable">
                        <i class="fas fa-calculator"></i> Generate Timetable
                    </button>
                </div>
            </div>
        </div>

        <div id="timetable-tab" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-table"></i> Generated Timetable</h2>
                </div>

                <div id="timetable-alert" class="alert alert-success hidden">
                    Timetable has been successfully generated based on your parameters!
                </div>

                <div class="timetable-container">
                    <table class="timetable" id="generated-timetable">
                        <!-- Timetable will be generated here -->
                    </table>
                </div>

                <div class="action-buttons">
                    <button class="btn" id="back-to-special">
                        <i class="fas fa-arrow-left"></i> Back to Special Classes
                    </button>
                    <button class="btn btn-success" id="export-timetable">
                        <i class="fas fa-download"></i> Export Timetable
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const subjectsCountInput = document.getElementById('subjects-count');
        const subjectsTable = document.getElementById('subjects-table');
        const facultyContainer = document.getElementById('faculty-container');
        const facultyList = document.getElementById('faculty-list');
        const specialClassesContainer = document.getElementById('special-classes-container');
        const addSpecialClassBtn = document.getElementById('add-special-class');
        const generateTimetableBtn = document.getElementById('generate-timetable');
        const timetableAlert = document.getElementById('timetable-alert');
        const generatedTimetable = document.getElementById('generated-timetable');

        // Navigation buttons
        document.getElementById('next-to-subjects').addEventListener('click', () => switchTab('subjects'));
        document.getElementById('back-to-basic').addEventListener('click', () => switchTab('basic'));
        document.getElementById('next-to-special').addEventListener('click', () => switchTab('special'));
        document.getElementById('back-to-subjects').addEventListener('click', () => switchTab('subjects'));
        document.getElementById('back-to-special').addEventListener('click', () => switchTab('special'));

        // Tab switching function
        function switchTab(tabName) {
            tabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });

            tabContents.forEach(content => {
                if (content.id === `${tabName}-tab`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }

        // Initialize subjects when the subjects count changes
        subjectsCountInput.addEventListener('change', initializeSubjects);

        // Initialize subjects table
        function initializeSubjects() {
            const subjectsCount = parseInt(subjectsCountInput.value);
            subjectsTable.innerHTML = '';

            for (let i = 0; i < subjectsCount; i++) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="text" class="subject-name" placeholder="Subject ${i + 1}" value="Subject ${i + 1}"></td>
                    <td><input type="number" class="classes-per-week" min="1" value="3"></td>
                    <td><input type="number" class="faculty-count" min="1" value="1"></td>
                `;
                subjectsTable.appendChild(row);
            }

            // Show faculty container if we have subjects
            if (subjectsCount > 0) {
                facultyContainer.classList.remove('hidden');
                initializeFaculty();
            } else {
                facultyContainer.classList.add('hidden');
            }
        }

        // Initialize faculty details based on subjects
        function initializeFaculty() {
            facultyList.innerHTML = '';
            const rows = subjectsTable.querySelectorAll('tr');

            rows.forEach((row, index) => {
                const subjectName = row.querySelector('.subject-name').value;
                const facultyCount = parseInt(row.querySelector('.faculty-count').value);

                for (let i = 0; i < facultyCount; i++) {
                    const facultyItem = document.createElement('div');
                    facultyItem.className = 'faculty-item';
                    facultyItem.innerHTML = `
                        <div class="faculty-name">
                            <input type="text" placeholder="Faculty Name" value="Faculty ${index + 1}.${i + 1}">
                        </div>
                        <div class="faculty-subjects">
                            <input type="text" value="${subjectName}" readonly>
                        </div>
                        <div class="faculty-leaves">
                            <input type="number" min="0" max="10" placeholder="Leaves per month" value="1">
                        </div>
                    `;
                    facultyList.appendChild(facultyItem);
                }
            });
        }

        // Add special class
        addSpecialClassBtn.addEventListener('click', addSpecialClass);

        function addSpecialClass() {
            const specialClass = document.createElement('div');
            specialClass.className = 'special-class';
            specialClass.innerHTML = `
                <select class="special-subject">
                    <option value="">Select Subject</option>
                    ${getSubjectOptions()}
                </select>
                <select class="special-day">
                    <option value="monday">Monday</option>
                    <option value="tuesday">Tuesday</option>
                    <option value="wednesday">Wednesday</option>
                    <option value="thursday">Thursday</option>
                    <option value="friday">Friday</option>
                </select>
                <select class="special-slot">
                    <option value="1">Slot 1</option>
                    <option value="2">Slot 2</option>
                    <option value="3">Slot 3</option>
                    <option value="4">Slot 4</option>
                    <option value="5">Slot 5</option>
                    <option value="6">Slot 6</option>
                </select>
                <button class="remove-btn"><i class="fas fa-times"></i></button>
            `;

            specialClassesContainer.appendChild(specialClass);

            // Add event listener to remove button
            specialClass.querySelector('.remove-btn').addEventListener('click', function () {
                specialClass.remove();
            });
        }

        // Get subject options for special classes
        function getSubjectOptions() {
            const rows = subjectsTable.querySelectorAll('tr');
            let options = '';

            rows.forEach(row => {
                const subjectName = row.querySelector('.subject-name').value;
                options += `<option value="${subjectName}">${subjectName}</option>`;
            });

            return options;
        }

        // Generate timetable
        generateTimetableBtn.addEventListener('click', generateTimetable);

        function generateTimetable() {
            // Show success message
            timetableAlert.classList.remove('hidden');

            // Sample timetable data (in a real app, this would be calculated)
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
            const timeSlots = ['9:00-10:00', '10:00-11:00', '11:00-12:00', '12:00-1:00', '1:00-2:00', '2:00-3:00'];
            const batches = parseInt(document.getElementById('batches').value);

            // Clear previous timetable
            generatedTimetable.innerHTML = '';

            // Create header row
            let headerRow = '<tr><th>Time</th>';
            for (let i = 1; i <= batches; i++) {
                headerRow += `<th>Batch ${i}</th>`;
            }
            headerRow += '</tr>';
            generatedTimetable.innerHTML = headerRow;

            // Create timetable rows
            for (let i = 0; i < timeSlots.length; i++) {
                let row = `<tr><td>${timeSlots[i]}</td>`;

                for (let j = 0; j < batches; j++) {
                    // In a real app, this would be calculated based on the optimization algorithm
                    const subjects = ['Math', 'Physics', 'Chemistry', 'Biology', 'English'];
                    const randomSubject = subjects[Math.floor(Math.random() * subjects.length)];
                    const colors = ['#4361ee', '#3a0ca3', '#7209b7', '#f72585', '#4cc9f0'];
                    const randomColor = colors[Math.floor(Math.random() * colors.length)];

                    row += `<td><div class="subject-cell" style="background-color: ${randomColor}">${randomSubject}</div></td>`;
                }

                row += '</tr>';
                generatedTimetable.innerHTML += row;
            }

            // Switch to timetable tab
            switchTab('timetable');
        }

        // Export timetable
        document.getElementById('export-timetable').addEventListener('click', function () {
            alert('Timetable exported successfully! In a real application, this would download the timetable as a PDF or Excel file.');
        });

        // Initialize the app
        initializeSubjects();

        // Add one special class by default
        addSpecialClass();
    </script>
</body>

</html>